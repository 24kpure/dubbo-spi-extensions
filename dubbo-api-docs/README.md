# dubboDoc

[中文](./README_ch.md)

Dubbo api documents, test tools, generate documents according to annotations, and provide test functions

Adding some annotations can generate a swagger like document without turning a non web Dubbo project into a web project

## Version planning
### First edition
* Parsing annotations and generating UI
* Unfriendly user interface (without handling some exceptions)
### Second edition
* Replace the JSON text area with a proper JSON editor, and verify the JSON format
* Add tabs
* It can save the test and facilitate the next direct loading test
* Some exceptions are handled as friendly text prompts
* Add apiRemark.md and show it in the front end
* Add apiChangelog.md and show it in the front end
### Follow up edition
* According to user requirements and issue planning
* Planning according to Dubbo upgrading
## Registry center suppor
* In theory, all registries supported by Dubbo support

## How to use?
1. Dubbo api docs annotation added to method parameters of Dubbo project
   * Dubbo provider project introduces dubbo-api-docs-core
   * If Dubbo's interface and parameters are a separate jar package project, introduce dubbo-api-docs-annotations

### Current Version: Same as Dubbo version
```
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-api-docs-annotations</artifactId>
    <version>${dubbo-version}</version>
</dependency>

<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-api-docs-core</artifactId>
    <version>${dubbo-version}</version>
</dependency>
```
2.Download dubbo-doc-ui-server [Download](https://github.com/apache/dubbo-spi-extensions/releases)

3. Start dubbo-api-docs-ui-server

4. Visit: http:// localhost:8888
   * Port can be modified in application.yml
   * swagger-ui http:// localhost:8888/swagger-ui/
### Annotation use
* @ApiModule class annotation: dubbo API module information, used to mark the purpose of an interface class module
    * value: module name
    * apiInterface: Provider implemented interface
    * version: module version
* @ApiDoc method annotation: dubbo API information, used to mark the purpose of an dubbo API
    * value: API name
    * description: API description(HTML tags available)
    * version: API version
    * responseClassDescription: response class description
* @RequestParam class property/method Parameter annotation: mark request parameters
    * value: parameter name
    * required: true/false required parameter
    * description: parameter description
    * example: parameter example
    * defaultValue: parameter default value
    * allowableValues: Allowed values. After setting this property, a drop-down list will be generated for the parameter
        * Note: a drop-down selection box will be generated after using this property
        * Parameters of boolean type do not need to be set with this property. A drop-down list of true / false will be generated by default
        * Parameters of enumeration type will automatically generate a drop-down list. If you do not want to open all enumeration values, you can set this property separately.
* @ResponseProperty Class attribute annotation: mark response parameters
    * value: parameter name
    * example: example
### dubbo-api-docs-ui
* Get API list direct connection: 
> Because Dubbo services with different functions may be registered in the same registration center, 
> but the name of the interface used by Dubbo doc is the same, so the interface of Dubbo doc uses direct 
connection to obtain the list of different interfaces of different functions.

* The test can be connected directly or through the registration center

### Use note
* The response bean (the return type of the interface) supports custom generics, but only one generic placeholder.
* About the use of Map: the key of map can only use the basic data type. If the key of map is not the basic data type, the generated key is not in the standard JSON format, and an exception will occur
* The API's synchronous / asynchronous is from org.apache.dubbo.config.annotation.Service.async

## Project structure
* dubbo-api-docs-annotations: Document generation annotation project
* dubbo-api-docs-core: Responsible for annotation analysis and document information acquisition interface (Dubbo API)
* dubbo-api-docs-ui-server: Web service, responsible for displaying doc and providing testing function
* dubbo-api-docs-ui: The front-end project will be packaged into Dubbo doc UI server project when it is published
* dubbo-api-docs-examples: Use example
* readmeImgs: Pictures used by README.md

## Major dependent version
* spring-boot: 2.3.4.RELEASE
* dubbo: apache dubbo 2.7.8
* icework in front(iceworks 4.0)
